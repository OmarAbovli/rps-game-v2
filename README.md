# ğŸª¨ğŸ“„âœ‚ï¸ RPS Arena: Battle Royale

An epic, real-time multiplayer 3D strategy game where **Rock, Paper, and Scissors** armies clash for dominance.

![Arena Shot](https://via.placeholder.com/800x400?text=RPS+Arena+Gameplay)

##  Project Overview
RPS Arena is a browser-based **Battle Royale** where 3 players control armies of Rock, Paper, and Scissors soldiers. The goal is simple: **Convert everyone else to your type.**

It features a custom-built **Authoritative Host** networking system, allowing players to connect peer-to-peer (P2P) without a dedicated backend server, ensuring low-latency and cost-effective multiplayer.

---

##  Technology Stack & Decisions

We chose a lightweight, performance-first stack to ensure the game runs smoothly on any device without the overhead of heavy frameworks.

### 1. **Core: Vanilla JavaScript + Vite**
*   **Why?** We needed raw performance without the abstraction cost of React or Vue. Game loops run at 60fps; direct DOM/Canvas manipulation is critical.
*   **Vite:** Used for lightning-fast HMR (Hot Module Replacement) and optimized production builds.

### 2. **3D Engine: Three.js**
*   **Why?** The industry standard for WebGL.
*   **Implementation:** 
    *   Custom geometry for distinct soldier shapes (Icosahedron for Rock, Box for Paper, Cone for Scissors).
    *   Dynamic lighting and shadow casting for the "Epic Arena" feel.
    *   Raycasting for unit selection and drag-and-drop placement.

### 3. **Networking: PeerJS (WebRTC)**
*   **Why?** True serverless multiplayer.
*   **Architecture: Authoritative Host Pattern**
    *   Instead of a central server, **Player 1 (Host)** acts as the server.
    *   **The Host** calculates all physics, collisions, and AI logic.
    *   **Clients** are "dumb terminals" that send inputs and render the state received from the Host.
    *   **Benefit:** Zero server costs, reduced latency for the host, and no "split reality" bugs where players see different things.

### 4. **State Synchronization**
*   **Deterministic IDs:** Every soldier has a unique ID (`ROCK_0`, `PAPER_LEADER`) generated by the Host.
*   **Sticky Sync:** Clients aggressively interpolate soldier positions to match the server's snapshot, preventing visual drift.
*   **Input Throttling:** Client inputs are sent at 20Hz (every 50ms) to prevent flooding the data channel.

---

##  Key Features

###  Gameplay Mechanics
*   **Type Advantage:** Rock crushes Scissors, Scissors cuts Paper, Paper covers Rock.
*   **Conversion:** Touching a weaker enemy converts them to your side instantly.
*   **Leader Unit:** Your main character. If the leader dies, you lose control (but your army fights on!).

###  Power-Up System
Randomly spawning orbs that turn the tide of battle:
*   **Speed Boost:** +50% movement speed.
*   **Invincibility:** Immune to conversion for 3s.
*   **Magnet Aura:** Pulls weaker enemies towards you.
*   **Reinforcement:** Spawns 3 extra soldiers instantly.
*   **Clone Decoy:** Creates a fake leader to confuse enemies.

###  Advanced Networking
*   **Lobby System:** Create or Join rooms using a simple 6-character code.
*   **Reconnection Safety:** 15s timeout protection and zombie connection cleanup.
*   **STUN Optimization:** Uses Google's STUN servers to penetrate firewalls and ensure rapid connection.

---

##  Project Structure

```
src/
â”œâ”€â”€ game/
â”‚   â”œâ”€â”€ Game.js          # Main game loop (Host/Client logic split)
â”‚   â”œâ”€â”€ Soldier.js       # Unit logic, physics, and mesh generation
â”‚   â”œâ”€â”€ Army.js          # Squad management and formation logic
â”‚   â””â”€â”€ PowerUpManager.js # Power-up spawning and effect handling
â”œâ”€â”€ network/
â”‚   â””â”€â”€ NetworkManager.js # PeerJS integration, input/state syncing
â”œâ”€â”€ ui/
â”‚   â””â”€â”€ UIManager.js     # HTML overlay management (Lobby, HUD)
â””â”€â”€ utils/
    â””â”€â”€ constants.js     # Config (Speed, Map Size, Colors)
```

---

##  Installation & Running

1. **Clone the repo**
   ```bash
   git clone https://github.com/OmarAbovli/rps-game-v2.git
   ```

2. **Install Dependencies**
   ```bash
   npm i
   ```

3. **Run Locally**
   ```bash
   npm run dev
   ```
   *   Open `http://localhost:5173` in multiple tabs to test multiplayer.

4. **Build for Production**
   ```bash
   npm run build
   ```

---

## ğŸ”® Future Roadmap
*   [ ] Mobile Touch Controls (Virtual Joystick).
*   [ ] Background Music & SFX Settings.
*   [ ] Global Server List (Matchmaking).
*   [ ] some other unknown shit the is not looks like the other shit.
