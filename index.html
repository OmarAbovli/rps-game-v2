<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RPS Arena - Rock Paper Scissors Battle!</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="stylesheet" href="./src/styles/main.css">

  <!-- Import Maps for ES Modules from CDN -->
  <script type="importmap">
  {
    "imports": {
      "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
      "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
    }
  }
  </script>
</head>

<body>
  <!-- Game Canvas Container -->
  <div id="game-container"></div>

  <!-- AUTH SCREEN -->
  <div id="auth-screen" class="ui-screen">
    <div class="menu-content auth-content">
      <h1>ğŸ” RPS ARENA</h1>

      <!-- LOGIN FORM -->
      <div id="login-container">
        <h2>Login</h2>
        <input type="email" id="login-email" placeholder="Email" class="auth-input">
        <input type="password" id="login-pass" placeholder="Password" class="auth-input">
        <button id="btn-submit-login" class="btn btn-primary">Login</button>
        <p>Don't have an account? <a href="#" id="btn-show-register">Register</a></p>
      </div>

      <!-- REGISTER FORM -->
      <div id="register-container" class="hidden">
        <h2>Create Account</h2>
        <input type="text" id="register-username" placeholder="Username" class="auth-input">
        <input type="email" id="register-email" placeholder="Email" class="auth-input">
        <input type="password" id="register-pass" placeholder="Password" class="auth-input">
        <button id="btn-submit-register" class="btn btn-primary">Sign Up</button>
        <p>Already have an account? <a href="#" id="btn-show-login">Login</a></p>
      </div>
    </div>
  </div>

  <!-- Main Menu UI -->
  <div id="main-menu" class="ui-screen">
    <div class="menu-content">
      <!-- User Profile (Top Right) -->
      <div class="user-profile">
        <span id="user-display-name" class="user-display-name">...</span>
      </div>

      <h1 class="game-title">
        <span class="rock">ğŸª¨</span>
        <span class="paper">ğŸ“„</span>
        <span class="scissors">âœ‚ï¸</span>
        <br>RPS ARENA
      </h1>
      <p class="tagline">Rock. Paper. Scissors. DOMINATE!</p>

      <div class="menu-buttons">
        <button id="btn-create-party" class="btn btn-primary">
          Create Party
        </button>
        <button id="btn-join-party" class="btn btn-secondary">
          Join Party
        </button>
        <button id="btn-solo-test" class="btn btn-secondary"
          style="margin-top: 20px; background: linear-gradient(180deg, #9b59b6, #8e44ad);">
          Solo Test Mode
        </button>
      </div>
    </div>
  </div>

  <!-- Join Party Modal -->
  <div id="join-modal" class="ui-screen hidden">
    <div class="modal-content">
      <h2>Join Party</h2>
      <input type="text" id="party-id-input" placeholder="Enter Party ID" maxlength="6">
      <div class="modal-buttons">
        <button id="btn-join-confirm" class="btn btn-primary">Join</button>
        <button id="btn-join-cancel" class="btn btn-secondary">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Lobby Screen -->
  <div id="lobby-screen" class="ui-screen hidden">
    <div class="lobby-content">
      <h2>Lobby</h2>

      <div class="party-id-display">
        <span>Party Code:</span>
        <span id="lobby-party-id" class="party-code">----</span>
        <button id="btn-copy-id" class="btn-icon">ğŸ“‹</button>
      </div>

      <!-- SOCIAL INVITE PANEL -->
      <div id="social-invite-panel" class="social-panel">
        <input type="text" id="invite-username" placeholder="Enter Username to Invite" class="auth-input"
          style="text-align:center;">
        <button id="btn-send-invite" class="btn btn-secondary" style="width:100%">Invite Friend ğŸ“©</button>
      </div>

      <div class="players-list">
        <!-- Player Slots (Generated JS) -->
        <div class="player-slot" id="player-1">
          <span class="player-icon">ğŸª¨</span>
          <span class="player-name">Waiting...</span>
        </div>
        <div class="player-slot" id="player-2">
          <span class="player-icon">ğŸ“„</span>
          <span class="player-name">Waiting...</span>
        </div>
        <div class="player-slot" id="player-3">
          <span class="player-icon">âœ‚ï¸</span>
          <span class="player-name">Waiting...</span>
        </div>
      </div>

      <button id="btn-start-game" class="btn btn-primary btn-large" disabled>
        Start Game (3/3 Players)
      </button>
    </div>
  </div>

  <!-- Placement Phase UI -->
  <div id="placement-ui" class="ui-overlay hidden">
    <div class="placement-timer">
      <span id="placement-countdown">10</span>
      <span>Place your soldiers!</span>
    </div>
    <button id="btn-ready" class="btn btn-primary">âœ“ Ready</button>
  </div>

  <!-- In-Game HUD -->
  <div id="game-hud" class="ui-overlay hidden">
    <div class="hud-top">
      <div class="player-counter" id="counter-rock">
        <span class="counter-icon">ğŸª¨</span>
        <span class="counter-value">5</span>
      </div>
      <div class="player-counter" id="counter-paper">
        <span class="counter-icon">ğŸ“„</span>
        <span class="counter-value">5</span>
      </div>
      <div class="player-counter" id="counter-scissors">
        <span class="counter-icon">âœ‚ï¸</span>
        <span class="counter-value">5</span>
      </div>
    </div>

    <div class="powerup-indicator hidden" id="powerup-active">
      <span class="powerup-icon">âš¡</span>
      <span class="powerup-timer">3s</span>
    </div>
  </div>

  <!-- Game Over Screen -->
  <div id="game-over" class="ui-screen hidden">
    <div class="game-over-content">
      <h1 id="winner-text">ğŸ† ROCK WINS! ğŸ†</h1>
      <div class="final-stats">
        <p>Total soldiers conquered: <span id="final-count">15</span></p>
      </div>
      <div class="game-over-buttons">
        <button id="btn-play-again" class="btn btn-primary"> Play Again</button>
        <button id="btn-back-menu" class="btn btn-secondary"> Main Menu</button>
      </div>
    </div>
  </div>

  <script type="module" src="./src/main.js"></script>
</body>

</html>